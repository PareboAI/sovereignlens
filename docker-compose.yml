version: '3.9'

services:

  postgres:
    image: postgres:16-alpine
    container_name: sovereignlens_postgres
    environment:
      POSTGRES_USER: sovereign
      POSTGRES_PASSWORD: password
      POSTGRES_DB: sovereignlens
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U sovereign -d sovereignlens"]
      interval: 5s
      timeout: 5s
      retries: 5

  # Uncomment in Week 2 — Phase II
  # neo4j:
  #   image: neo4j:5.15
  #   ports: ["7474:7474", "7687:7687"]
  #   environment:
  #     NEO4J_AUTH: neo4j/sovereignpass
  #     NEO4J_PLUGINS: '["graph-data-science"]'

  # Uncomment in Week 2 — Phase II
  # qdrant:
  #   image: qdrant/qdrant:latest
  #   ports: ["6333:6333"]
  #   volumes:
  #     - qdrant_data:/qdrant/storage

volumes:
  postgres_data:
  # qdrant_data: